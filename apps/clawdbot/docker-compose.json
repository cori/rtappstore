{
  "schemaVersion": 2,
  "services": [
    {
      "name": "clawdbot",
      "image": "ghcr.io/clawdbot/clawdbot:${APP_VERSION}",
      "isMain": true,
      "internalPort": 18789,
      "environment": {
        "HOME": "/home/node",
        "TERM": "xterm-256color",
        "NODE_ENV": "production",
        "ANTHROPIC_API_KEY": "${ANTHROPIC_API_KEY}",
        "OPENAI_API_KEY": "${OPENAI_API_KEY}",
        "GEMINI_API_KEY": "${GEMINI_API_KEY}",
        "OPENROUTER_API_KEY": "${OPENROUTER_API_KEY}",
        "TELEGRAM_BOT_TOKEN": "${TELEGRAM_BOT_TOKEN}",
        "DISCORD_BOT_TOKEN": "${DISCORD_BOT_TOKEN}",
        "SLACK_BOT_TOKEN": "${SLACK_BOT_TOKEN}",
        "SLACK_APP_TOKEN": "${SLACK_APP_TOKEN}",
        "CLAWDBOT_GATEWAY_TOKEN": "${CLAWDBOT_GATEWAY_TOKEN}"
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/config",
          "containerPath": "/home/node/.clawdbot"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/workspace",
          "containerPath": "/home/node/clawd"
        }
      ],
      "command": ["node", "dist/index.js", "gateway", "--bind", "lan", "--port", "18789"],
      "healthCheck": {
        "test": "node dist/index.js health --token \"$CLAWDBOT_GATEWAY_TOKEN\" || exit 1",
        "interval": "30s",
        "timeout": "10s",
        "retries": 3
      }
    }
  ]
}
