{
  "services": [
    {
      "name": "partdb-db",
      "image": "mariadb:11",
      "environment": {
        "MYSQL_DATABASE": "${PARTDB_DB_NAME}",
        "MYSQL_USER": "${PARTDB_DB_USER}",
        "MYSQL_PASSWORD": "${PARTDB_DB_PASSWORD}",
        "MYSQL_ROOT_PASSWORD": "${PARTDB_DB_PASSWORD}"
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/mysql",
          "containerPath": "/var/lib/mysql"
        }
      ],
      "internalPort": "3306"
    },
    {
      "name": "partdb",
      "image": "jbtronics/part-db1:latest",
      "isMain": true,
      "dependsOn": ["partdb-db"],
      "environment": {
        "DATABASE_URL": "mysql://${PARTDB_DB_USER}:${PARTDB_DB_PASSWORD}@partdb-db:3306/${PARTDB_DB_NAME}",
        "APP_ENV": "docker",
        "DEFAULT_LANG": "${PARTDB_DEFAULT_LANG}",
        "DEFAULT_TIMEZONE": "${PARTDB_DEFAULT_TIMEZONE}",
        "BASE_CURRENCY": "${PARTDB_BASE_CURRENCY}",
        "TRUSTED_PROXIES": "127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16"
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/uploads",
          "containerPath": "/var/www/html/uploads"
        },
        {
          "hostPath": "${APP_DATA_DIR}/public_media",
          "containerPath": "/var/www/html/public/media"
        }
      ],
      "internalPort": "80"
    }
  ]
}
