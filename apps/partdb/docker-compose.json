{
  "services": [
    {
      "name": "partdb-db",
      "image": "mariadb:11",
      "environment": [
        {
          "key": "MYSQL_DATABASE",
          "value": "${PARTDB_DB_NAME}"
        },
        {
          "key": "MYSQL_USER",
          "value": "${PARTDB_DB_USER}"
        },
        {
          "key": "MYSQL_PASSWORD",
          "value": "${PARTDB_DB_PASSWORD}"
        },
        {
          "key": "MYSQL_ROOT_PASSWORD",
          "value": "${PARTDB_DB_PASSWORD}"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/mysql",
          "containerPath": "/var/lib/mysql"
        }
      ],
      "internalPort": "3306"
    },
    {
      "name": "partdb",
      "image": "jbtronics/part-db1:latest",
      "isMain": true,
      "dependsOn": ["partdb-db"],
      "environment": [
        {
          "key": "DATABASE_URL",
          "value": "mysql://${PARTDB_DB_USER}:${PARTDB_DB_PASSWORD}@partdb-db:3306/${PARTDB_DB_NAME}"
        },
        {
          "key": "APP_ENV",
          "value": "docker"
        },
        {
          "key": "DEFAULT_LANG",
          "value": "${PARTDB_DEFAULT_LANG}"
        },
        {
          "key": "DEFAULT_TIMEZONE",
          "value": "${PARTDB_DEFAULT_TIMEZONE}"
        },
        {
          "key": "BASE_CURRENCY",
          "value": "${PARTDB_BASE_CURRENCY}"
        },
        {
          "key": "TRUSTED_PROXIES",
          "value": "127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/uploads",
          "containerPath": "/var/www/html/uploads"
        },
        {
          "hostPath": "${APP_DATA_DIR}/public_media",
          "containerPath": "/var/www/html/public/media"
        }
      ],
      "internalPort": "80"
    }
  ]
}
